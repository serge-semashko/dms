c2/copy_RF_Agreement.cfg


[parameters]
service=jinr.adb.ServiceCopyRecordset
LOG=ON
InsertSQL=insert into #dest_table# (#destFields#) values (#qList#)
numBatch=1000
SHOW_DET=
[end]


PROCESSING:
1. out [report header]
2. out [prepare data]
3. parse [fields] => srcFields, destFields, qList
4. doCopy: srcSQL => InsertSQL
5. out [report footer]


[fields]
ITEM=пункт_соглашения_рф
LEV_1=соглашение_рф_уровень_1
LEV_2=соглашение_рф_уровень_2
AMOUNT_RF=фин_расходы_РФ
AMOUNT_JINR=фин_расходы_ОИЯИ
AMOUNT_OTHER=фин_расходы_страны_участники
[end]


======================= STANDARD PART =================
[setCriteria]
$SET_PARAMETERS destCriteria=; srcCriteria=; 
$SET_PARAMETERS src_table=NICA_RF_AGREEMENT; dest_table=[DB_1C_2].[DBO].[NICA_РФ_Соглашение]; 
[end]


[report header]
$INCLUDE [setCriteria]
copy_RF_Agreement.cfg: <b>#src_table# ==> #dest_table#</b><br>
Удаление старых записей...
$USE_DB ASU
$GET_DATA [delete old]
OK. ??!ERROR&!GET_DATA_ERROR
#GET_DATA_ERROR# <br> ??GET_DATA_ERROR
#ERROR#<br>
[end]

[delete old]
delete from #dest_table#;
commit;
[end]

[report footer]
$INCLUDE c2/copyData.cfg[report footer]
ERROR: #ERROR#	??ERROR
<p>
$USE_DB 
[end]


[prepare data]
[end]

[srcSQL]
$USE_DB
select 	#srcFields# from #src_table#
[end]

[start copy]
Копирование данных...
$USE_DB ASU
[end]

==============================================================

