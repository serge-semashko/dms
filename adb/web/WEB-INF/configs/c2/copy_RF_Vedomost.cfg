c2/copy_RF_Vedomost.cfg

[parameters]
service=jinr.adb.ServiceCopyRecordset
LOG=ON
InsertSQL=insert into #dest_table# (#destFields#) values (#qList# )
numBatch=1000
SHOW_DET=
[end]

120 гггг-мм-дд чч:ми:сс


[fields]
ID=ID
DES=наименование
WBS_ID=ID_пункта_EVM
AGREEMENT_ITEM=пункт_соглашения_рф
DIRECTION=направление_финансирования
AMOUNT_TOTAL=общая_сумма
AMOUNT_16=сумма_2016_рубли
AMOUNT_17=сумма_2017_рубли
AMOUNT_18=сумма_2018_рубли
AMOUNT_19=сумма_2019_рубли
AMOUNT_20=сумма_2020_рубли
APPROVED=утверждено
UPDATED=изменено
MODIFIER_ID=MODIFIER_ID
[end]

USE DB_1C_2;
grant delete, select, insert, update on DBO.NICA_РФ_Соглашение to wq; 
grant delete, select, insert, update on DBO.NICA_РФ_Соглашение_2  to wq; 
grant delete, select, insert, update on DBO.NICA_РФ_Ведомость to wq;
grant delete, select, insert, update on DBO.NICA_ведомость_СЭД to wq; 
grant delete, select, insert, update on DBO.NICA_WBS to wq;

grant select, insert,  delete, update on DBO.СЭД_документы to wq;
grant select, insert,  delete, update on DBO.СЭД_типы_документов to wq;
grant select, insert,  delete, update on DBO.СЭД_договоры to wq;
grant select, insert,  delete, update on DBO.СЭД_заявки to wq;
grant select, insert,  delete, update on dbo.СЭД_список_маршрутов to wq;
grant select, insert,  delete, update on dbo.СЭД_маршруты to wq;


mpv - Васильев
grant select on DBO.NICA_РФ_Соглашение to mpv;
grant select on DBO.NICA_РФ_Соглашение_2 to mpv;
grant select on DBO.NICA_WBS to mpv;
grant select on DBO.NICA_РФ_Ведомость to mpv;
grant delete, select, insert, update on DBO.NICA_ведомость_СЭД to mpv;

grant select on DBO.СЭД_документы to mpv;
grant select on DBO.СЭД_типы_документов to mpv;
grant select on DBO.СЭД_договоры to mpv;
grant select on DBO.СЭД_заявки to mpv;
grant select on dbo.СЭД_список_маршрутов to mpv;
grant select on dbo.СЭД_маршруты to mpv;



[srcSQL]
$USE_DB
select #srcFields# from #src_table#
[end]

======================= STANDARD PART =================
[setCriteria]
$SET_PARAMETERS destCriteria=; srcCriteria=; 
$SET_PARAMETERS src_table=NICA_RF_VEDOMOST; dest_table=[DB_1C_2].[DBO].[NICA_РФ_Ведомость]; 
[end]


[report header]
$INCLUDE [setCriteria]
copy_RF_Vedomost.cfg: <b>#src_table# ==> #dest_table#</b><br>
Удаление старых записей...
$USE_DB ASU
$GET_DATA [delete old]
OK. ??!ERROR&!GET_DATA_ERROR
#GET_DATA_ERROR# <br> ??GET_DATA_ERROR
#ERROR#<br>
[end]

[delete old]
delete from #dest_table#;
commit;
[end]

[report footer]
$INCLUDE c2/copyData.cfg[report footer]
ERROR: #ERROR#	??ERROR
<p>
$USE_DB 
[end]


[prepare data]
[end]

[start copy]
Копирование данных...
$USE_DB ASU
[end]

==============================================================

