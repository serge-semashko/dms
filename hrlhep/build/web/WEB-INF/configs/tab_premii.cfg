tab_premii.cfg

[comments]
descr=A: Таб "Премии"

input=none
output=HTML таблица объектов
parents=
childs=admin/monitor/docs_list_table.cfg
testURL=?c=admin/monitor/docs_list
author:Куняев
[end]


[parameters]
request_name=A:Монитор
LOG=ON
[end]

[report]
+++++++ начальная строка и кол-во строк на странице по умолчанию ++++ ??
$SET_PARAMETERS srn=1; rpp=20;  ??!srn|!rpp
<input type="hidden" name="srn" value="#srn#">

+++++++ Сортировка по умолчанию ++++ ??
$SET_PARAMETERS srt=sotr.FIO; desc=; ??!srt
+++++++ параметры сортировки в запросе ++++ ??
<input type="hidden" name="srt" value="#srt#">
<input type="hidden" name="desc" value="#desc#">


+++++ Фильтры +++++ ??
<input type=hidden value="Y" size="3" name="done"> ??

<style>??
td{padding: 3px; ??
    border: 1px solid #000;} ??
</style> ??

<center> ??
<div id="premiiTabFilters">
    <table border=0 cellpadding=5>
        $INCLUDE dat/utils.cfg[personal filters]
        <tr>
            <td>
                <input type="submit" style="width:80; height:30" value="OK">
            </td>
        </tr>
    </table>
    </br>
</div>

<div id="content_table">
$CALL_SERVICE c=tab_premii_table
</div>
</center> ??


<script>
var doSubmit=function(){
    document.theForm.c.value="tab_premii_table";
    AjaxCall('content_table','', true, 'theForm');   
}
function year(){
var d = new Date();
document.write(d.getFullYear());

var y=document.getElementById("year").value; ??
document.theForm.submit(); ??
}
</script>
[end]

[get dropdown]
select distinct concat('<option value="', otdel, '" '
, case when otdel='#otdel#' then 'selected' else '' end
, '>' , otdel, '</option>') as OTDEL
from sotrudniki
order by otdel
; 
select distinct concat('<option value="', category, '" ' 
, case when category='#category#' then 'selected' else '' end 
, '>' , category, '</option>')as CATEGORIES
from sotrudniki
;
select distinct concat('<option value="', post, '" ' 
, case when post='#post#' then 'selected' else '' end 
, '>' , post, '</option>')as POST
from sotrudniki
order by post
;
select distinct concat('<option value="', year, '" ' 
, case when year='#year#' then 'selected' else '' end 
, '>' , year, '</option>')as YEAR
from premii
order by year
[end]