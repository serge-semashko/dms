<html>
    <head>
        <title>HR LHEP Log</title>
        <META http-equiv=Content-Type content="text/html; charset=utf-8">
        <style>
            body{background-color:#eefff4;}
            xmp {margin:0;} 
            .pt {cursor:pointer;} 
            span.req_start {border:solid 1px red; font-weight:bold; background-color:#FFFFA0;}
            span.req_end {border:solid 1px red; font-weight:bold; background-color:#D0FFB0;}
            div.req {display:none; border:solid 1px red; padding:4px; background-color:white;}

            span.ss_start {border:solid 1px red; background-color:#D0E8FF;}
            span.ss_back {border:solid 1px blue; background-color:#D0FFB0;}
            div.ss {display:none; border:solid 1px green; border-right:none; padding:6px; margin-left:5px;}
        </style>
        <script type="text/javascript">
            var toggleDiv = function (id) {
                var d = document.getElementById(id);
                if (d.style.display === "block")
                    d.style.display = "none";
                else
                    d.style.display = "block";
            };
        </script>
    </head><body>
<b>$INCLUDE </b>[report_]<BR>
<br> <b>SQL: [[read file] (1) ]:</b><xmp>read file: HR_LOG_3_5_13.html maxLength=500000
</xmp>------ SQL done, 1ms.<br><BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_84");'> Request_HR_LHEP_84 [05.03 13:13:20] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_84' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 9 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
summa=6</xmp>------ SQL done, 3ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_84");'>Request_HR_LHEP_84 (edit/premiya) DONE! (139ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_85");'> Request_HR_LHEP_85 [05.03 13:13:22] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_85' class='req'> queryString:c=edit/premiya&mode=edit&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 9 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
summa=6</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_85");'>Request_HR_LHEP_85 (edit/premiya) DONE! (108ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_86");'> Request_HR_LHEP_86 [05.03 13:13:29] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_86' class='req'> queryString:c=edit/premiya&cop=save&mode=edit&tab_n=17914&month=3&istochnik1=1&istochnik2=1&istochnik3=1&istochnik4=1&istochnik5=1&istochnik6=1&istochnik7=2&istochnik8=2&istochnik9=2&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (1) ]:</b><xmp>select 'Y' as rec_exists from premii
where tab_n=17914
and month=3
and year = year(now())
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
rec_exists=Y</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[updateRecord] (2) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (3) ]:</b><xmp>update premii
set tab_n='17914'
, istochnik1=1
, istochnik2=1
, istochnik3=1
, istochnik4=1
, istochnik5=1
, istochnik6=1
, istochnik6=1
, istochnik6=1
, istochnik6=1
where tab_n=17914 and month=3     and year = year(now())
</xmp> DONE! 1 record(s) affected------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[updateRecord] (4) ]:</b><xmp></xmp><b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_86");'>Request_HR_LHEP_86 (edit/premiya) DONE! (189ms)</span> <BR>
<b>$INCLUDE </b>dat/common.dat[rowLinks]<BR>
$$$$$$$$$$ prevSetLink=<a class=page href="javascript:; goToRow();"> <<< предыд. </a></div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_87");'> Request_HR_LHEP_87 [05.03 13:13:29] 2: 0:0:0:0:0:0:0:1 c=tab_premii_table</span><div id='Request_HR_LHEP_87' class='req'> queryString:c=tab_premii_table&srn=1&srt=sotr.FIO&sotr_deleted=0&rpp=20&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[define month] (1) ]:</b><xmp>select month(now()) as edit_month
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
edit_month=3</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[define month] (2) ]:</b><xmp></xmp>lookup_date!!!!!!   month(now()) 3<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [[get Totals] (1) ]:</b><xmp>select sum(
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()))) as SELECTION_YEAR_SUM,
sum((select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
)) as SELECTION_MONTH_SUM
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
SELECTION_YEAR_SUM=2202
SELECTION_MONTH_SUM=6</xmp>------ SQL done, 14ms.<br><BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
 SQL: [SQL]<BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select sotr.person_id, sotr.tab_n, sotr.topparent_name,sotr.subtopparent_name, sotr.FIO, sotr.otdel, sotr.post
, sotr.division, sotr.category,
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now())) as summa_year,
(select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
) as summa_month,
ifnull(oklad.oklad,0)+ifnull(oklad.kompens,0)+ifnull(oklad.dopl_stepen,0)
+ifnull(oklad.personal_nadbav,0)+ifnull(oklad.perconal_imen_nadbav,0)
+ifnull(oklad.premija_rabochim+oklad.sovmeshenie,0) as SUM_oklad,
case when sotr.okonch_rab< now()  or is_deleted=1 then 'Y'  else 'N' end as dismissed
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
order by sotr.FIO
</xmp> <b> Processed in 50ms. </b><br> <b> NumTableRows=200; </b><BR>
<b>$INCLUDE </b>dat/common.dat[rpp]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_87");'>Request_HR_LHEP_87 (tab_premii_table) DONE! (406ms)</span> <BR>
<b>$INCLUDE </b>[report_]<BR>
<br> <b>SQL: [[read file] (1) ]:</b><xmp>read file: HR_LOG_3_5_13.html maxLength=500000
</xmp>------ SQL done, 3ms.<br><BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_89");'> Request_HR_LHEP_89 [05.03 13:14:8] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_89' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 9 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
summa=6</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_89");'>Request_HR_LHEP_89 (edit/premiya) DONE! (249ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_90");'> Request_HR_LHEP_90 [05.03 13:14:11] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_90' class='req'> queryString:c=edit/premiya&mode=edit&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 9 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
summa=6</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_90");'>Request_HR_LHEP_90 (edit/premiya) DONE! (113ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_91");'> Request_HR_LHEP_91 [05.03 13:14:18] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_91' class='req'> queryString:c=edit/premiya&cop=save&mode=edit&tab_n=17914&month=3&istochnik1=1&istochnik2=1&istochnik3=1&istochnik4=1&istochnik5=1&istochnik6=1&istochnik7=2&istochnik8=2&istochnik9=2&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (1) ]:</b><xmp>select 'Y' as rec_exists from premii
where tab_n=17914
and month=3
and year = year(now())
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
rec_exists=Y</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[updateRecord] (2) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (3) ]:</b><xmp>update premii
set tab_n='17914'
, istochnik1=1
, istochnik2=1
, istochnik3=1
, istochnik4=1
, istochnik5=1
, istochnik6=1
, istochnik7=1
, istochnik8=1
, istochnik9=1
where tab_n=17914 and month=3     and year = year(now())
</xmp> DONE! 1 record(s) affected------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[updateRecord] (4) ]:</b><xmp></xmp><b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_91");'>Request_HR_LHEP_91 (edit/premiya) DONE! (305ms)</span> <BR>
<b>$INCLUDE </b>dat/common.dat[rowLinks]<BR>
$$$$$$$$$$ prevSetLink=<a class=page href="javascript:; goToRow();"> <<< предыд. </a></div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_92");'> Request_HR_LHEP_92 [05.03 13:14:19] 2: 0:0:0:0:0:0:0:1 c=tab_premii_table</span><div id='Request_HR_LHEP_92' class='req'> queryString:c=tab_premii_table&srn=1&srt=sotr.FIO&sotr_deleted=0&rpp=20&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[define month] (1) ]:</b><xmp>select month(now()) as edit_month
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
edit_month=3</xmp>------ SQL done, 4ms.<br><BR>
<br> <b>SQL: [[define month] (2) ]:</b><xmp></xmp>lookup_date!!!!!!   month(now()) 3<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [[get Totals] (1) ]:</b><xmp>select sum(
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()))) as SELECTION_YEAR_SUM,
sum((select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
)) as SELECTION_MONTH_SUM
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
SELECTION_YEAR_SUM=2202
SELECTION_MONTH_SUM=6</xmp>------ SQL done, 14ms.<br><BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
 SQL: [SQL]<BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select sotr.person_id, sotr.tab_n, sotr.topparent_name,sotr.subtopparent_name, sotr.FIO, sotr.otdel, sotr.post
, sotr.division, sotr.category,
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now())) as summa_year,
(select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
) as summa_month,
ifnull(oklad.oklad,0)+ifnull(oklad.kompens,0)+ifnull(oklad.dopl_stepen,0)
+ifnull(oklad.personal_nadbav,0)+ifnull(oklad.perconal_imen_nadbav,0)
+ifnull(oklad.premija_rabochim+oklad.sovmeshenie,0) as SUM_oklad,
case when sotr.okonch_rab< now()  or is_deleted=1 then 'Y'  else 'N' end as dismissed
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
order by sotr.FIO
</xmp> <b> Processed in 50ms. </b><br> <b> NumTableRows=200; </b><BR>
<b>$INCLUDE </b>dat/common.dat[rpp]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_92");'>Request_HR_LHEP_92 (tab_premii_table) DONE! (401ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_93");'> Request_HR_LHEP_93 [05.03 13:14:21] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_93' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 4ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
istochnik7=1
istochnik8=1
istochnik9=1
summa=9</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_93");'>Request_HR_LHEP_93 (edit/premiya) DONE! (181ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_94");'> Request_HR_LHEP_94 [05.03 13:14:25] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_94' class='req'> queryString:c=edit/premiya&mode=edit&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
istochnik7=1
istochnik8=1
istochnik9=1
summa=9</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_94");'>Request_HR_LHEP_94 (edit/premiya) DONE! (111ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_95");'> Request_HR_LHEP_95 [05.03 13:14:31] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_95' class='req'> queryString:c=edit/premiya&cop=save&mode=edit&tab_n=17914&month=3&istochnik1=1&istochnik2=1&istochnik3=1&istochnik4=1&istochnik5=1&istochnik6=1&istochnik7=2&istochnik8=2&istochnik9=2&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (1) ]:</b><xmp>select 'Y' as rec_exists from premii
where tab_n=17914
and month=3
and year = year(now())
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
rec_exists=Y</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[updateRecord] (2) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (3) ]:</b><xmp>update premii
set tab_n='17914'
, istochnik1=1
, istochnik2=1
, istochnik3=1
, istochnik4=1
, istochnik5=1
, istochnik6=1
, istochnik7=1
, istochnik8=1
, istochnik9=1
where tab_n=17914 and month=3     and year = year(now())
</xmp> DONE! 1 record(s) affected------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[updateRecord] (4) ]:</b><xmp></xmp><b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_95");'>Request_HR_LHEP_95 (edit/premiya) DONE! (182ms)</span> <BR>
<b>$INCLUDE </b>dat/common.dat[rowLinks]<BR>
$$$$$$$$$$ prevSetLink=<a class=page href="javascript:; goToRow();"> <<< предыд. </a></div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_96");'> Request_HR_LHEP_96 [05.03 13:14:31] 2: 0:0:0:0:0:0:0:1 c=tab_premii_table</span><div id='Request_HR_LHEP_96' class='req'> queryString:c=tab_premii_table&srn=1&srt=sotr.FIO&sotr_deleted=0&rpp=20&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[define month] (1) ]:</b><xmp>select month(now()) as edit_month
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
edit_month=3</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[define month] (2) ]:</b><xmp></xmp>lookup_date!!!!!!   month(now()) 3<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [[get Totals] (1) ]:</b><xmp>select sum(
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()))) as SELECTION_YEAR_SUM,
sum((select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
)) as SELECTION_MONTH_SUM
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
SELECTION_YEAR_SUM=2202
SELECTION_MONTH_SUM=6</xmp>------ SQL done, 14ms.<br><BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
 SQL: [SQL]<BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select sotr.person_id, sotr.tab_n, sotr.topparent_name,sotr.subtopparent_name, sotr.FIO, sotr.otdel, sotr.post
, sotr.division, sotr.category,
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now())) as summa_year,
(select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
) as summa_month,
ifnull(oklad.oklad,0)+ifnull(oklad.kompens,0)+ifnull(oklad.dopl_stepen,0)
+ifnull(oklad.personal_nadbav,0)+ifnull(oklad.perconal_imen_nadbav,0)
+ifnull(oklad.premija_rabochim+oklad.sovmeshenie,0) as SUM_oklad,
case when sotr.okonch_rab< now()  or is_deleted=1 then 'Y'  else 'N' end as dismissed
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
order by sotr.FIO
</xmp> <b> Processed in 49ms. </b><br> <b> NumTableRows=200; </b><BR>
<b>$INCLUDE </b>dat/common.dat[rpp]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_96");'>Request_HR_LHEP_96 (tab_premii_table) DONE! (392ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_97");'> Request_HR_LHEP_97 [05.03 13:14:33] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_97' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
istochnik7=1
istochnik8=1
istochnik9=1
summa=9</xmp>------ SQL done, 3ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_97");'>Request_HR_LHEP_97 (edit/premiya) DONE! (186ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_98");'> Request_HR_LHEP_98 [05.03 13:15:1] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_98' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
istochnik7=1
istochnik8=1
istochnik9=1
summa=9</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_98");'>Request_HR_LHEP_98 (edit/premiya) DONE! (228ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_99");'> Request_HR_LHEP_99 [05.03 13:15:3] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_99' class='req'> queryString:c=edit/premiya&mode=edit&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=1
istochnik3=1
istochnik4=1
istochnik5=1
istochnik6=1
istochnik7=1
istochnik8=1
istochnik9=1
summa=9</xmp>------ SQL done, 3ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_99");'>Request_HR_LHEP_99 (edit/premiya) DONE! (94ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_100");'> Request_HR_LHEP_100 [05.03 13:15:17] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_100' class='req'> queryString:c=edit/premiya&cop=save&mode=edit&tab_n=17914&month=3&istochnik1=1&istochnik2=2&istochnik3=3&istochnik4=4&istochnik5=5&istochnik6=6&istochnik7=7&istochnik8=8&istochnik9=9&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (1) ]:</b><xmp>select 'Y' as rec_exists from premii
where tab_n=17914
and month=3
and year = year(now())
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
rec_exists=Y</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[updateRecord] (2) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (3) ]:</b><xmp>update premii
set tab_n='17914'
, istochnik1=1
, istochnik2=2
, istochnik3=3
, istochnik4=4
, istochnik5=5
, istochnik6=6
, istochnik7=7
, istochnik8=8
, istochnik9=9
where tab_n=17914 and month=3     and year = year(now())
</xmp> DONE! 1 record(s) affected------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[updateRecord] (4) ]:</b><xmp></xmp><b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_100");'>Request_HR_LHEP_100 (edit/premiya) DONE! (181ms)</span> <BR>
<b>$INCLUDE </b>dat/common.dat[rowLinks]<BR>
$$$$$$$$$$ prevSetLink=<a class=page href="javascript:; goToRow();"> <<< предыд. </a></div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_101");'> Request_HR_LHEP_101 [05.03 13:15:17] 2: 0:0:0:0:0:0:0:1 c=tab_premii_table</span><div id='Request_HR_LHEP_101' class='req'> queryString:c=tab_premii_table&srn=1&srt=sotr.FIO&sotr_deleted=0&rpp=20&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[define month] (1) ]:</b><xmp>select month(now()) as edit_month
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
edit_month=3</xmp>------ SQL done, 4ms.<br><BR>
<br> <b>SQL: [[define month] (2) ]:</b><xmp></xmp>lookup_date!!!!!!   month(now()) 3<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [[get Totals] (1) ]:</b><xmp>select sum(
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()))) as SELECTION_YEAR_SUM,
sum((select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
)) as SELECTION_MONTH_SUM
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
SELECTION_YEAR_SUM=2217
SELECTION_MONTH_SUM=21</xmp>------ SQL done, 14ms.<br><BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
 SQL: [SQL]<BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select sotr.person_id, sotr.tab_n, sotr.topparent_name,sotr.subtopparent_name, sotr.FIO, sotr.otdel, sotr.post
, sotr.division, sotr.category,
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now())) as summa_year,
(select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
) as summa_month,
ifnull(oklad.oklad,0)+ifnull(oklad.kompens,0)+ifnull(oklad.dopl_stepen,0)
+ifnull(oklad.personal_nadbav,0)+ifnull(oklad.perconal_imen_nadbav,0)
+ifnull(oklad.premija_rabochim+oklad.sovmeshenie,0) as SUM_oklad,
case when sotr.okonch_rab< now()  or is_deleted=1 then 'Y'  else 'N' end as dismissed
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
order by sotr.FIO
</xmp> <b> Processed in 82ms. </b><br> <b> NumTableRows=200; </b><BR>
<b>$INCLUDE </b>dat/common.dat[rpp]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_101");'>Request_HR_LHEP_101 (tab_premii_table) DONE! (424ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_102");'> Request_HR_LHEP_102 [05.03 13:15:19] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_102' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=2
istochnik3=3
istochnik4=4
istochnik5=5
istochnik6=6
istochnik7=7
istochnik8=8
istochnik9=9
summa=45</xmp>------ SQL done, 1ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_102");'>Request_HR_LHEP_102 (edit/premiya) DONE! (185ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_103");'> Request_HR_LHEP_103 [05.03 13:15:24] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_103' class='req'> queryString:c=edit/premiya&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=2
istochnik3=3
istochnik4=4
istochnik5=5
istochnik6=6
istochnik7=7
istochnik8=8
istochnik9=9
summa=45</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_103");'>Request_HR_LHEP_103 (edit/premiya) DONE! (110ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_104");'> Request_HR_LHEP_104 [05.03 13:15:26] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_104' class='req'> queryString:c=edit/premiya&mode=edit&tab_n=17914&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 3ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=17914
</xmp><xmp>***** 1 record(s) retrieved. Filled 12 parameters: 
FIO=Абраамян Хачик Унанович
tab_n=17914
istochnik1=1
istochnik2=2
istochnik3=3
istochnik4=4
istochnik5=5
istochnik6=6
istochnik7=7
istochnik8=8
istochnik9=9
summa=45</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_104");'>Request_HR_LHEP_104 (edit/premiya) DONE! (101ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_105");'> Request_HR_LHEP_105 [05.03 13:15:36] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_105' class='req'> queryString:c=edit/premiya&cop=save&mode=edit&tab_n=17914&month=3&istochnik1=0&istochnik2=0&istochnik3=0&istochnik4=0&istochnik5=0&istochnik6=0&istochnik7=0&istochnik8=0&istochnik9=0&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (1) ]:</b><xmp>select 'Y' as rec_exists from premii
where tab_n=17914
and month=3
and year = year(now())
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
rec_exists=Y</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[updateRecord] (2) ]:</b><xmp></xmp><br> <b>SQL: [[updateRecord] (3) ]:</b><xmp>update premii
set tab_n='17914'
, istochnik1=0
, istochnik2=0
, istochnik3=0
, istochnik4=0
, istochnik5=0
, istochnik6=0
, istochnik7=0
, istochnik8=0
, istochnik9=0
where tab_n=17914 and month=3     and year = year(now())
</xmp> DONE! 1 record(s) affected------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[updateRecord] (4) ]:</b><xmp></xmp><b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[edit form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_105");'>Request_HR_LHEP_105 (edit/premiya) DONE! (173ms)</span> <BR>
<b>$INCLUDE </b>dat/common.dat[rowLinks]<BR>
$$$$$$$$$$ prevSetLink=<a class=page href="javascript:; goToRow();"> <<< предыд. </a></div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_106");'> Request_HR_LHEP_106 [05.03 13:15:36] 2: 0:0:0:0:0:0:0:1 c=tab_premii_table</span><div id='Request_HR_LHEP_106' class='req'> queryString:c=tab_premii_table&srn=1&srt=sotr.FIO&sotr_deleted=0&rpp=20&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[define month] (1) ]:</b><xmp>select month(now()) as edit_month
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
edit_month=3</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[define month] (2) ]:</b><xmp></xmp>lookup_date!!!!!!   month(now()) 3<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [[get Totals] (1) ]:</b><xmp>select sum(
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()))) as SELECTION_YEAR_SUM,
sum((select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
)) as SELECTION_MONTH_SUM
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
</xmp><xmp>***** 1 record(s) retrieved. Filled 2 parameters: 
SELECTION_YEAR_SUM=2196
SELECTION_MONTH_SUM=0</xmp>------ SQL done, 13ms.<br><BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
 SQL: [SQL]<BR>
<b>$INCLUDE </b>utils.cfg[criteria]<BR>
<br> <b>SQL: [SQL]:</b><xmp>select sotr.person_id, sotr.tab_n, sotr.topparent_name,sotr.subtopparent_name, sotr.FIO, sotr.otdel, sotr.post
, sotr.division, sotr.category,
(select
sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) +
ifnull(premii.istochnik3,0) + ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) +
ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now())) as summa_year,
(select sum(ifnull(premii.istochnik1,0) + ifnull(premii.istochnik2,0) + ifnull(premii.istochnik3,0) +
ifnull(premii.istochnik4,0)+ ifnull(premii.istochnik5,0) + ifnull(premii.istochnik6,0))
from premii where premii.tab_n = sotr.tab_n and premii.year = year(now()) and premii.month = month(now())
) as summa_month,
ifnull(oklad.oklad,0)+ifnull(oklad.kompens,0)+ifnull(oklad.dopl_stepen,0)
+ifnull(oklad.personal_nadbav,0)+ifnull(oklad.perconal_imen_nadbav,0)
+ifnull(oklad.premija_rabochim+oklad.sovmeshenie,0) as SUM_oklad,
case when sotr.okonch_rab< now()  or is_deleted=1 then 'Y'  else 'N' end as dismissed
from sotrudniki sotr
left join oklad on sotr.tab_n=oklad.tab_n
where lab_id = 100000
and sotr.is_deleted = 0
order by sotr.FIO
</xmp> <b> Processed in 53ms. </b><br> <b> NumTableRows=200; </b><BR>
<b>$INCLUDE </b>dat/common.dat[rpp]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_106");'>Request_HR_LHEP_106 (tab_premii_table) DONE! (408ms)</span> <BR>
</div><br><span class='req_start pt' onClick='toggleDiv("Request_HR_LHEP_107");'> Request_HR_LHEP_107 [05.03 13:15:40] 2: 0:0:0:0:0:0:0:1 c=edit/premiya</span><div id='Request_HR_LHEP_107' class='req'> queryString:c=edit/premiya&tab_n=150996&month=3&ajax=Y; log=true; session inactive=min;<br><br> <b>SQL: [[istochnik titles] (1) ]:</b><xmp>select name as istochnik1_title from istochniki where id=1
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik1_title=Группа советников и консультантов</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (2) ]:</b><xmp>select name as istochnik2_title  from istochniki where id=2
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik2_title=Отделение №1 Ускорительное</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (3) ]:</b><xmp>select name as istochnik3_title  from istochniki where id=3
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik3_title=Отделение №2 Физики на ускорительном комплексе Нуклотрон-NICA</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (4) ]:</b><xmp>select name as istochnik4_title  from istochniki where id=4
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik4_title=Отделение №3 Физики адронов</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (5) ]:</b><xmp>select name as istochnik5_title  from istochniki where id=5
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik5_title=Отделение №4 Физики на встречных пучках</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (6) ]:</b><xmp>select name as istochnik6_title  from istochniki where id=6
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik6_title=Отделение №5 Научно–методических исследований и инноваций</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (7) ]:</b><xmp>select name as istochnik7_title  from istochniki where id=7
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik7_title=Отделение №6 Главного инженера</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (8) ]:</b><xmp>select name as istochnik8_title  from istochniki where id=8
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik8_title=Инженерный энерготехнологический отдел</xmp>------ SQL done, 1ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (9) ]:</b><xmp>select name as istochnik9_title  from istochniki where id=9
</xmp><xmp>***** 1 record(s) retrieved. Filled 1 parameters: 
istochnik9_title=Административно-хозяйственное подразделение</xmp>------ SQL done, 2ms.<br><BR>
<br> <b>SQL: [[istochnik titles] (10) ]:</b><xmp></xmp><br> <b>SQL: [[getRecord] (1) ]:</b><xmp>select sotr.FIO, sotr.tab_n
, premii.istochnik1, premii.istochnik2, premii.istochnik3
, premii.istochnik4, premii.istochnik5, premii.istochnik6
, premii.istochnik7, premii.istochnik8, premii.istochnik9
, ifnull(premii.istochnik1,0)+ifnull(premii.istochnik2,0)+ifnull(premii.istochnik3,0)
+ifnull(premii.istochnik4,0)+ifnull(premii.istochnik5,0)+ ifnull(premii.istochnik6,0)
+ifnull(premii.istochnik7,0)+ifnull(premii.istochnik8,0)+ ifnull(premii.istochnik9,0)
summa
from sotrudniki sotr
left join premii on sotr.tab_n=premii.tab_n  and premii.year=year(now())and premii.month=3
where sotr.tab_n=150996
</xmp><xmp>***** 1 record(s) retrieved. Filled 3 parameters: 
FIO=Аввакумова Ирина Леонидовна
tab_n=150996
summa=0</xmp>------ SQL done, 2ms.<br><BR>
<b>$INCLUDE </b>[month]</tr><BR>
<b>$INCLUDE </b>[view form]<BR>
</div><span class='req_end pt' onClick='toggleDiv("Request_HR_LHEP_107");'>Request_HR_LHEP_107 (edit/premiya) DONE! (108ms)</span> <BR>
